<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQDC - Portail des Produits</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-section">
                <div class="sqdc-logo">SQDC</div>
                <h1>Portail des Produits</h1>
            </div>
            <div class="store-info">
                <span class="store-label">Succursale: 77074</span>
            </div>
        </div>
    </header>

    <div class="controls">
        <div class="filter-section">
            <h3>Type de Cannabis</h3>
            <div class="filter-buttons" role="group" aria-label="Filtres de type de cannabis">
                <button class="filter-btn active" data-type="all" aria-pressed="true" aria-label="Afficher tous les types">
                    <span>Tous</span>
                </button>
                <button class="filter-btn active" data-type="Indica" aria-pressed="true" aria-label="Filtrer par type Indica">
                    <span class="icon indica-icon">‚óè</span>
                    <span>Indica</span>
                </button>
                <button class="filter-btn active" data-type="Sativa" aria-pressed="true" aria-label="Filtrer par type Sativa">
                    <span class="icon sativa-icon">‚óè</span>
                    <span>Sativa</span>
                </button>
                <button class="filter-btn active" data-type="Hybride" aria-pressed="true" aria-label="Filtrer par type Hybride">
                    <span class="icon hybride-icon">‚óè</span>
                    <span>Hybride</span>
                </button>
            </div>
        </div>

        <div class="search-section">
            <input type="text" id="searchInput" placeholder="Rechercher par nom ou marque..." aria-label="Rechercher des produits par nom ou marque">
        </div>
    </div>

    <main>
        <section class="strain-section indica-section" aria-labelledby="indica-title">
            <div class="section-header">
                <span class="section-icon indica-icon">‚óè</span>
                <h2 id="indica-title">Indica</h2>
                <span class="product-count" id="indica-count" aria-live="polite" aria-atomic="true">0</span>
            </div>
            <div class="subsection">
                <div class="subsection-header">
                    <span>3,5 g</span>
                    <span class="subsection-count" id="indica-3.5g-count">0</span>
                </div>
                <div class="grid-wrapper">
                    <div class="scroll-arrow scroll-arrow-left" role="button" tabindex="0" aria-label="Faire d√©filer les produits vers la gauche">‚Äπ</div>
                    <div class="products-grid" id="indica-grid-3.5g"></div>
                    <div class="scroll-arrow scroll-arrow-right" role="button" tabindex="0" aria-label="Faire d√©filer les produits vers la droite">‚Ä∫</div>
                </div>
            </div>
            <div class="subsection">
                <div class="subsection-header">
                    <span>Autres formats</span>
                    <span class="subsection-count" id="indica-other-count">0</span>
                </div>
                <div class="grid-wrapper">
                    <div class="scroll-arrow scroll-arrow-left">‚Äπ</div>
                    <div class="products-grid" id="indica-grid-other"></div>
                    <div class="scroll-arrow scroll-arrow-right">‚Ä∫</div>
                </div>
            </div>
        </section>

        <section class="strain-section sativa-section">
            <div class="section-header">
                <span class="section-icon sativa-icon">‚óè</span>
                <h2>Sativa</h2>
                <span class="product-count" id="sativa-count">0</span>
            </div>
            <div class="subsection">
                <div class="subsection-header">
                    <span>3,5 g</span>
                    <span class="subsection-count" id="sativa-3.5g-count">0</span>
                </div>
                <div class="grid-wrapper">
                    <div class="scroll-arrow scroll-arrow-left">‚Äπ</div>
                    <div class="products-grid" id="sativa-grid-3.5g"></div>
                    <div class="scroll-arrow scroll-arrow-right">‚Ä∫</div>
                </div>
            </div>
            <div class="subsection">
                <div class="subsection-header">
                    <span>Autres formats</span>
                    <span class="subsection-count" id="sativa-other-count">0</span>
                </div>
                <div class="grid-wrapper">
                    <div class="scroll-arrow scroll-arrow-left">‚Äπ</div>
                    <div class="products-grid" id="sativa-grid-other"></div>
                    <div class="scroll-arrow scroll-arrow-right">‚Ä∫</div>
                </div>
            </div>
        </section>

        <section class="strain-section oz28-section">
            <div class="section-header">
                <span class="section-icon oz28-icon">‚óè</span>
                <h2>28g</h2>
                <span class="product-count" id="oz28-count">0</span>
            </div>
            <div class="subsection">
                <div class="grid-wrapper">
                    <div class="scroll-arrow scroll-arrow-left">‚Äπ</div>
                    <div class="products-grid oz28-grid" id="oz28-grid"></div>
                    <div class="scroll-arrow scroll-arrow-right">‚Ä∫</div>
                </div>
            </div>
        </section>

        <section class="strain-section hybride-section">
            <div class="section-header">
                <span class="section-icon hybride-icon">‚óè</span>
                <h2>Hybride</h2>
                <span class="product-count" id="hybride-count">0</span>
            </div>
            <div class="subsection">
                <div class="subsection-header">
                    <span>3,5 g</span>
                    <span class="subsection-count" id="hybride-3.5g-count">0</span>
                </div>
                <div class="grid-wrapper">
                    <div class="scroll-arrow scroll-arrow-left">‚Äπ</div>
                    <div class="products-grid" id="hybride-grid-3.5g"></div>
                    <div class="scroll-arrow scroll-arrow-right">‚Ä∫</div>
                </div>
            </div>
            <div class="subsection">
                <div class="subsection-header">
                    <span>Autres formats</span>
                    <span class="subsection-count" id="hybride-other-count">0</span>
                </div>
                <div class="grid-wrapper">
                    <div class="scroll-arrow scroll-arrow-left">‚Äπ</div>
                    <div class="products-grid" id="hybride-grid-other"></div>
                    <div class="scroll-arrow scroll-arrow-right">‚Ä∫</div>
                </div>
            </div>
        </section>

    </main>

    <!-- Tooltip for product details -->
    <div class="product-tooltip" id="productTooltip">
        <div class="tooltip-name" id="tooltipName"></div>
        <div class="tooltip-brand" id="tooltipBrand"></div>
        <div class="tooltip-format" id="tooltipFormat"></div>
        <div class="tooltip-sku" id="tooltipSku"></div>
        <div class="tooltip-thc">
            <div class="tooltip-thc-info">
                <div class="tooltip-label">THC</div>
                <div class="tooltip-value" id="tooltipThc"></div>
            </div>
            <div class="tooltip-thc-info" id="tooltipCbdSection" style="display: none;">
                <div class="tooltip-label">CBD</div>
                <div class="tooltip-value" id="tooltipCbd" style="color: #4CAF50;"></div>
            </div>
        </div>
    </div>

    <!-- Image Viewer Modal -->
    <div class="modal-overlay" id="imageModal" role="dialog" aria-modal="true" aria-labelledby="imageModalTitle">
        <div class="image-modal-content">
            <div class="image-modal-header">
                <h3 id="imageModalTitle"></h3>
                <button class="image-modal-close" id="imageModalCloseBtn" aria-label="Fermer la visualisation">&times;</button>
            </div>
            <div class="image-modal-body">
                <div class="image-modal-file-selector" id="imageModalFileSelector" style="display: none;">
                    <p><strong>Plusieurs fiches trouv√©es. Choisissez laquelle visualiser:</strong></p>
                    <div id="imageModalFileList" class="file-list"></div>
                    <button id="imageModalDisplayBtn" class="modal-btn modal-btn-save">Afficher</button>
                </div>
                <img id="imageModalImg" src="" alt="Image du produit" style="display: none;">
                <iframe id="imageModalPdf" src="" style="display: none;"></iframe>
                <div class="image-modal-loading" id="imageModalLoading" style="display: none;">
                    <p>Recherche des fiches...</p>
                </div>
                <div class="image-modal-error" id="imageModalError" style="display: none;">
                    <p>Aucune fiche trouv√©e pour ce produit</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal-overlay" id="editModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Modifier le produit</h3>
                <button class="modal-view-image-btn" id="modalViewImageBtn" aria-label="Visualiser l'image du produit">
                    <span>üëÅ</span> Voir l'image
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-product-name" id="modalProductName" aria-live="polite"></div>

                <div class="modal-field">
                    <label for="modalSectionSelect">Section:</label>
                    <select id="modalSectionSelect" aria-label="S√©lectionner la section du produit">
                        <option value="Indica">Indica</option>
                        <option value="Sativa">Sativa</option>
                        <option value="Hybride">Hybride</option>
                        <option value="28g">28g</option>
                    </select>
                </div>

                <div class="modal-field" id="modalFormatField">
                    <label for="modalFormatSelect">Format:</label>
                    <select id="modalFormatSelect" aria-label="S√©lectionner le format du produit">
                        <option value="3,5 g">3,5 g</option>
                        <option value="1 g">1 g</option>
                        <option value="7 g">7 g</option>
                        <option value="28 g">28 g</option>
                        <option value="Pr√©roul√© 3x0,5g">Pr√©roul√© 3x0,5g</option>
                        <option value="Pr√©roul√© 5x0,5g">Pr√©roul√© 5x0,5g</option>
                        <option value="Pr√©roul√© 10x0,35g">Pr√©roul√© 10x0,35g</option>
                        <option value="Pr√©roul√© 1x1g">Pr√©roul√© 1x1g</option>
                    </select>
                </div>

                <div class="modal-field">
                    <label for="modalThcInput">THC %:</label>
                    <input type="number" id="modalThcInput" step="0.1" min="0" max="100" aria-label="Pourcentage THC entre 0 et 100" aria-required="false">
                </div>

                <div class="modal-field">
                    <label for="modalCbdInput">CBD %:</label>
                    <input type="number" id="modalCbdInput" step="0.1" min="0" max="100" aria-label="Pourcentage CBD entre 0 et 100" aria-required="false">
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-cancel" id="modalCancelBtn" aria-label="Annuler les modifications">Annuler</button>
                <button class="modal-btn modal-btn-save" id="modalSaveBtn" aria-label="Sauvegarder les modifications">Sauvegarder</button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="products-data.js"></script>
    <script src="files-index-data.js"></script>
    <script src="app.js"></script>
</body>
</html>
